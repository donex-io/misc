# Using Zap Wallet

Install Bitcoin Core and LND.

This follows 

https://stopanddecrypt.medium.com/a-complete-beginners-guide-to-installing-a-lightning-node-on-linux-2021-edition-ece227cfc35d#b471

## Configure lnd.conf

Add the following in the `lnd.conf` file:

	# Tells LND to listen on all of your computer's interfaces
	# This could alternatively be set to your router's subnet IP
	tlsextraip=0.0.0.0

	# Tells LND where to listen for RPC messages
	# This could also be set to your router's subnet IP
	rpclisten=0.0.0.0:10009

If you’re going to install the Zap mobile wallet, you’ll need to configure LND so you can connect via LND’s gRPC interface. (This will not be the same for the Tor guide. Over Tor, Zap will use LND’s REST interface.)

`tslextraip` allows you to set your router’s subnet IP address so LND listens for connections coming from your router. LND uses a TLS certificate to manage these connections. By default LND will create a TLS certificate that only allows connections from the same computer that LND is running on, so we need to specify where else LND should listen for connections before the TLS certificate is created.

Connections from Zap on your phone will be over the Internet, so your phone will reach your router first. Then your router will have to forward that connection to your computer running LND. Everyone’s router subnet varies, so using 0.0.0.0 lets LND listen on all possible subnets and helps keeps things simple for this tutorial. It works and you don’t need to change it, but you could.

`rpclisten` tells LND where to listen for gRPC connections. After including the subnet (or in our case all subnets) above into the TLS certificate, which allows the connections from the router, we now need to specify that gRPC should listen for connections from the router, and over what port. 


## Install lndconnect

lndconnect Github repo:

https://github.com/LN-Zap/lndconnect

lndconnect is needed in order to connect LND to Zap:

	go get -d github.com/LN-Zap/lndconnect

Move into corresponding directory:

	cd ~/go/src/github.com/LN-Zap/lndconnect

Then

	make

Start `lndconnect` and add `--image` to generate a QR code or `--url` if a url shall be displayed instead of a QR code.

	cd ~

	lndconnect --image


##  Import Wallet in Zap

Important: **Make sure LND is running and the wallet is unlocked!**

Scan the QR code generated by `lndconnect` with Zap.

That's it.


## Run lnd permanently on a server

In order to reach the LND node with the wallet, LND has to run permanently. This can be done by `screen` or `tmux`, for example. If you want to use `tmux` you need to install it by

	sudo apt install tmux

Then start a session with tmux by

	tmux

and leave/detach the tmux session by typing <kbd>Ctrl</kbd>+<kbd>b</kbd> and then <kbd>d</kbd>